# Chapter 4. Quorum Intersection Revised

## 跨阶段的quorum交集 Quorum intersection across phases

将Classic Paxos Phase I所使用的quorum记为$\mathcal Q_1$，将Phase II所使用的quorum记为$\mathcal Q_2$

在Classic Paxos中要求所有quorum都存在交集，与Phase无关，从而其quorum要求是：

```math
\forall Q,Q' \in \mathcal Q_1 : Q \cap Q' \neq \emptyset
\\
\forall Q,Q' \in \mathcal Q_2 : Q \cap Q' \neq \emptyset
\\
\forall Q_1 \in \mathcal Q_1, \forall Q_2 \in \mathcal Q_2 : Q_1 \cap Q_2 \neq \emptyset
```

实际上**只需要来自$\mathcal Q_1$和$\mathcal Q_2$的quorum存在交集即可**，各自内部的quorum可以不必存在交集，即上述要求的前两条是多余，即只需要满足：

```math
\forall Q_1 \in \mathcal Q_1, \forall Q_2 \in \mathcal Q_2 : Q_1 \cap Q_2 \neq \emptyset
```

从而相应的proposer算法中，对quorum的判断修改为：

- **Phase I** ：`while` $\exist Q \in \mathcal Q_2 : Q_P \cap Q = \emptyset$ `do`
- **Phase II**：`while` $\forall Q \in \mathcal Q_2 : Q_A \nsupseteq Q$ `do`

## 跨epoch的quorum交集 Quorum intersection across epochs

## 作用 Implications

### Bypassing phase II

### Co-location of proposers and acceptors

### Multi-Paxos

### Voting for epochs
